{"ast":null,"code":"import _classCallCheck from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"H:\\\\music\\\\react-music-player\\\\src\\\\components\\\\Footer\\\\index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Icon } from 'antd';\nimport ReadyList from '@components/ReadyQueue';\nimport * as actionCreators from '@common/store/actionCreators';\nimport { formatDuration, formatCurrentTime } from '@src/utils';\nimport './style.less';\n\nvar Footer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Footer, _Component);\n\n  function Footer() {\n    var _this;\n\n    _classCallCheck(this, Footer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Footer).call(this));\n\n    _this.toPlay = function () {\n      _this.audio.play();\n\n      _this.setState({\n        ppIcon: 'pause-circle'\n      });\n\n      _this.updatePlayingStatus(true); // this.audio.addEventListener('durationchange',console.log(1))\n\n    };\n\n    _this.toPause = function () {\n      _this.audio.pause();\n\n      _this.setState({\n        ppIcon: 'play-circle'\n      });\n    };\n\n    _this.syncTime = function () {\n      var song = _this.props.playQueue.song;\n      var duration = song.dt || song.duration;\n      var timeScale = _this.audio.currentTime * 1000 / duration;\n\n      _this.setState({\n        curProgressBarWidth: \"\".concat(timeScale * 100, \"%\"),\n        cdt: formatCurrentTime(_this.audio.currentTime)\n      });\n\n      _this.updateCurrentTime();\n    };\n\n    _this.updateCurrentTime = function () {\n      _this.props.indexUpdatePlayerStatus({\n        currentTime: _this.audio.currentTime\n      });\n    };\n\n    _this.updatePlayingStatus = function (status) {\n      _this.props.indexUpdatePlayerStatus({\n        isPlaying: status\n      });\n    };\n\n    _this.togglePlay = function () {\n      if (_this.audio.paused || _this.audio.ended) {\n        _this.toPlay();\n      } else {\n        _this.toPause();\n      }\n    };\n\n    _this.setCurTime = function (e) {\n      var _this$progressBar$get = _this.progressBar.getBoundingClientRect(),\n          left = _this$progressBar$get.left;\n\n      var distance = e.clientX - left;\n      var scale = distance / _this.progressBar.offsetWidth; // audio Ê†áÁ≠æÂÜÖÊúâdurationÔºåÊï∞ÊçÆÂØπË±°‰∏≠‰πüÊúâdtÔºå‰∏çËøádt = 1000 * duration\n\n      _this.audio.currentTime = _this.audio.duration * scale;\n\n      _this.setState({\n        curProgressBarWidth: \"\".concat(scale * 100, \"%\")\n      });\n\n      console.log(_this.state.curProgressBarWidth);\n\n      _this.updateCurrentTime();\n    };\n\n    _this.toggleMute = function () {\n      _this.audio.muted = !_this.audio.muted;\n\n      if (_this.audio.muted) {\n        _this.setState({\n          lastVolumeIcon: _this.state.volumeIcon,\n          volumeIcon: 'üîá'\n        });\n      } else {\n        _this.setState({\n          volumeIcon: _this.state.lastVolumeIcon\n        });\n      }\n    };\n\n    _this.setVol = function (e) {\n      var _this$valBar$getBound = _this.valBar.getBoundingClientRect(),\n          left = _this$valBar$getBound.left;\n\n      var distance = e.clientX - left;\n      var scale = distance / _this.valBar.offsetWidth;\n      _this.audio.volume = scale;\n      var volumeIcon;\n\n      if (scale > 0 && scale < 0.5) {\n        volumeIcon = 'üîâ';\n      } else if (scale >= 0.5 && scale <= 1) {\n        volumeIcon = 'üîä';\n      }\n\n      _this.setState({\n        volumeIcon: volumeIcon,\n        curVolBarWidth: \"\".concat(distance, \"px\")\n      });\n    };\n\n    _this.setMode = function () {\n      var mode = _this.state.mode; // ÂàóË°®Âæ™ÁéØ => È°∫Â∫èÊí≠Êîæ\n\n      var listloop = function listloop() {\n        _this.setState({\n          mode: 'sequential',\n          modeIcon: React.createElement(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"list\",\n            title: \"\\u987A\\u5E8F\\u64AD\\u653E\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118\n            },\n            __self: this\n          }, \"\\u21A9\\uFE0F\")\n        });\n      }; // È°∫ËÆØÊí≠Êîæ => ÂçïÊõ≤Âæ™ÁéØ\n\n\n      var sequential = function sequential() {\n        _this.setState({\n          mode: 'singleCycle',\n          modeIcon: React.createElement(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"list\",\n            title: \"\\u5355\\u66F2\\u5FAA\\u73AF\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, \"\\uD83D\\uDD02\")\n        }, function () {\n          _this.audio.loop = true;\n        });\n      }; // ÂçïÊõ≤Âæ™ÁéØ => ÈöèÊú∫Êí≠Êîæ\n\n\n      var singleCycle = function singleCycle() {\n        _this.setState({\n          mode: 'shuffleplay',\n          modeIcon: React.createElement(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"list\",\n            title: \"\\u968F\\u673A\\u64AD\\u653E\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134\n            },\n            __self: this\n          }, \"\\uD83D\\uDD00\")\n        }, function () {\n          _this.audio.loop = false;\n        });\n      }; // ÈöèÊú∫Êí≠Êîæ => ÂàóË°®Âæ™ÁéØ\n\n\n      var shuffleplay = function shuffleplay() {\n        _this.setState({\n          mode: 'listloop',\n          modeIcon: React.createElement(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"list\",\n            title: \"\\u5217\\u8868\\u5FAA\\u73AF\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          }, \"\\uD83D\\uDD01\")\n        });\n      };\n\n      var modeMap = {\n        listloopTest: listloop,\n        sequentialTest: sequential,\n        singleCycleTest: singleCycle,\n        shuffleplayTest: shuffleplay // ÂΩìÁÇπÂáªÂÆåÂÖ®ÈÉ®Ê®°ÂºèÊó∂ÔºåÂ∞±‰ºöÂõûÂà∞ÊúÄÂàùÁöÑÁä∂ÊÄÅ\n\n      };\n\n      if (mode === \"listloop\") {\n        modeMap.listloopTest();\n      } else if (mode === \"sequential\") {\n        modeMap.sequentialTest();\n      } else if (mode === \"singleCycle\") {\n        modeMap.singleCycleTest();\n      } else if (mode === \"shuffleplay\") {\n        modeMap.shuffleplayTest();\n      }\n    };\n\n    _this.toggleReadyList = function () {\n      _this.setState({\n        showReadyList: !_this.state.showReadyList\n      });\n    };\n\n    _this.preSong = function () {\n      var index = _this.props.playQueue.index;\n      var mode = _this.state.mode;\n      var playlist = _this.props.playQueue.playlist; // Áî±indexÊéßÂà∂Êí≠ÊîæÁöÑÊ≠åÊõ≤ÁöÑÊòØÊåâÁÖßplaylist‰∏≠ÁöÑÊéíÂ∫èÊù•ÁöÑ\n\n      index -= 1; // Ëã•ÊòØÂΩìÂâçÂú®playlist‰∏≠ÊòØÁ¨¨‰∏ÄÈ¶ñÊ≠åÔºåÂàôË∑≥ËΩ¨Âà∞ÊúÄÂêéÁöÑ‰∏ÄÈ¶ñÔºåÂç≥length-1\n\n      if (index === -1) {\n        index = playlist.length - 1;\n      } // Ëã•ÂΩìÂâçÊí≠ÊîæÊ®°ÂºèÊòØÈöèÊú∫ÁöÑËØùÔºåÂç≥ÈöèÊú∫Ë∑≥ËΩ¨‰∏ÄÈ¶ñÊ≠åÊõ≤\n\n\n      if (mode === 'shuffleplay') {\n        index = Math.floor(Math.random() * playlist.length);\n      }\n\n      var song = playlist[index];\n\n      _this.props.indexChangeSong({\n        song: song,\n        index: index\n      });\n    };\n\n    _this.nextSong = function () {\n      var index = _this.props.playQueue.index;\n      var mode = _this.state.mode;\n      var playlist = _this.props.playQueue.playlist;\n      index += 1; // Ëã•ÊòØÂΩìÂâçÂú®playlist‰∏≠ÊòØÁ¨¨‰∏ÄÈ¶ñÊ≠åÔºåÂàôË∑≥ËΩ¨Âà∞ÊúÄÂêéÁöÑ‰∏ÄÈ¶ñÔºåÂç≥length-1\n\n      if (index === playlist.length) {\n        index = 0;\n      } // Ëã•ÂΩìÂâçÊí≠ÊîæÊ®°ÂºèÊòØÈöèÊú∫ÁöÑËØùÔºåÂç≥ÈöèÊú∫Ë∑≥ËΩ¨‰∏ÄÈ¶ñÊ≠åÊõ≤\n\n\n      if (mode === 'shuffleplay') {\n        index = Math.floor(Math.random() * playlist.length);\n      }\n\n      var song = playlist[index];\n\n      _this.props.indexChangeSong({\n        song: song,\n        index: index\n      });\n    };\n\n    _this.changeSongCallBack = function () {\n      var ppIcon = _this.state.ppIcon; // ÊöÇÂÅúÁä∂ÊÄÅ‰∏ãÂàáÊ≠å‰øùÊåÅÊöÇÂÅúÁä∂ÊÄÅ\n      // \n    };\n\n    _this.state = {\n      cdt: '00:00',\n      curProgressBarWidth: 0,\n      curVolBarWidth: '50%',\n      ppIcon: 'play-circle',\n      lastVolumeIcon: '',\n      volumeIcon: 'üîä',\n      mode: 'listloop',\n      modeIcon: React.createElement(\"span\", {\n        role: \"img\",\n        \"aria-label\": \"list\",\n        title: \"\\u5217\\u8868\\u5FAA\\u73AF\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }, \"\\uD83D\\uDD01\"),\n      showReadyList: false\n    };\n    return _this;\n  } // ÁªÑ‰ª∂ÁöÑÁîüÂëΩÂë®ÊúüÂáΩÊï∞=>ÁªÑ‰ª∂ÂÆåÊàêÊõ¥Êñ∞ÂêéÁ´ãÂç≥Ë∞ÉÁî®„ÄÇÂàùÂßãÂåñÊó∂‰∏ç‰ºöË¢´Ë∞ÉÁî®\n\n\n  _createClass(Footer, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.playQueue.song.id !== prevProps.playQueue.song.id) {\n        this.changeSongCallBack();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          volumeIcon = _this$state.volumeIcon,\n          modeIcon = _this$state.modeIcon,\n          ppIcon = _this$state.ppIcon,\n          curProgressBarWidth = _this$state.curProgressBarWidth,\n          curVolBarWidth = _this$state.curVolBarWidth,\n          showReadyList = _this$state.showReadyList;\n      var song = this.props.playQueue.song;\n      var duration = song.duration || song.dt;\n      var artists = song.artists || song.ar;\n      var album = song.album || song.al;\n      return React.createElement(\"footer\", {\n        key: \"player\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"audio\", {\n        key: \"audio\",\n        src: song.url,\n        ref: function ref(node) {\n          _this2.audio = node;\n        },\n        onTimeUpdate: this.syncTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"\\u60A8\\u7684\\u6D4F\\u89C8\\u5668\\u4E0D\\u652F\\u6301audio\\u6807\\u7B7E\\uFF0C\\u65E0\\u6CD5\\u64AD\\u653E\\u97F3\\u4E50\"), React.createElement(\"div\", {\n        className: \"player-album\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"/lyric/\".concat(song.id)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: album.picUrl,\n        alt: \"album-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"player-btns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"backward\",\n        onClick: this.preSong,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(Icon, {\n        type: ppIcon,\n        onClick: this.togglePlay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }), React.createElement(Icon, {\n        type: \"forward\",\n        onClick: this.nextSong,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"player-state\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"player-state-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, song.name), React.createElement(\"div\", {\n        className: \"artist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, artists.map(function (v) {\n        return React.createElement(Link, {\n          key: v.id,\n          to: {\n            pathname: \"/artistinfo/\".concat(v.id)\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, v.name);\n      })), React.createElement(\"div\", {\n        className: \"duration\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, this.state.cdt, \"/\", formatDuration(duration))), React.createElement(\"div\", {\n        className: \"player-state-bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"progress-bar\",\n        ref: function ref(node) {\n          _this2.progressBar = node;\n        },\n        onClick: function onClick(e) {\n          _this2.setCurTime(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"current-progress\",\n        style: {\n          width: \"\".concat(curProgressBarWidth)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"vol-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"vol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        onClick: this.toggleMute,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, volumeIcon), React.createElement(\"div\", {\n        className: \"vol-bar\",\n        onClick: this.setVol,\n        ref: function ref(node) {\n          _this2.valBar = node;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"current-vol\",\n        style: {\n          width: \"\".concat(curVolBarWidth)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"player-extra\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mode-title\",\n        onClick: this.setMode,\n        ref: function ref(node) {\n          _this2.changePlayer = node;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, modeIcon), React.createElement(Icon, {\n        type: \"heart-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }), React.createElement(Icon, {\n        type: \"bars\",\n        onClick: this.toggleReadyList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), showReadyList ? React.createElement(ReadyList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }) : null));\n    }\n  }]);\n\n  return Footer;\n}(Component);\n\nvar mapState = function mapState(state) {\n  return {\n    playQueue: state.playQueue\n  };\n};\n\nvar mapDispatch = function mapDispatch(dispatch) {\n  return {\n    indexChangeSong: function indexChangeSong(_ref) {\n      var song = _ref.song,\n          index = _ref.index;\n      dispatch(actionCreators.changeSong({\n        song: song,\n        index: index\n      }));\n    },\n    indexUpdatePlayerStatus: function indexUpdatePlayerStatus(status) {\n      dispatch(actionCreators.updatePlayerStatus(status));\n    }\n  };\n};\n\nexport default connect(mapState, mapDispatch)(Footer);","map":{"version":3,"sources":["H:\\music\\react-music-player\\src\\components\\Footer\\index.js"],"names":["React","Component","connect","Link","Icon","ReadyList","actionCreators","formatDuration","formatCurrentTime","Footer","toPlay","audio","play","setState","ppIcon","updatePlayingStatus","toPause","pause","syncTime","song","props","playQueue","duration","dt","timeScale","currentTime","curProgressBarWidth","cdt","updateCurrentTime","indexUpdatePlayerStatus","status","isPlaying","togglePlay","paused","ended","setCurTime","e","progressBar","getBoundingClientRect","left","distance","clientX","scale","offsetWidth","console","log","state","toggleMute","muted","lastVolumeIcon","volumeIcon","setVol","valBar","volume","curVolBarWidth","setMode","mode","listloop","modeIcon","sequential","loop","singleCycle","shuffleplay","modeMap","listloopTest","sequentialTest","singleCycleTest","shuffleplayTest","toggleReadyList","showReadyList","preSong","index","playlist","length","Math","floor","random","indexChangeSong","nextSong","changeSongCallBack","prevProps","id","artists","ar","album","al","url","node","pathname","picUrl","name","map","v","width","changePlayer","mapState","mapDispatch","dispatch","changeSong","updatePlayerStatus"],"mappings":"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","sourcesContent":["import React , { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { Icon } from 'antd';\r\nimport ReadyList from '@components/ReadyQueue';\r\nimport * as actionCreators from '@common/store/actionCreators';\r\nimport { formatDuration, formatCurrentTime } from '@src/utils'\r\nimport './style.less';\r\n\r\nclass Footer extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            cdt: '00:00',\r\n            curProgressBarWidth: 0,\r\n            curVolBarWidth: '50%',\r\n            ppIcon: 'play-circle',\r\n            lastVolumeIcon: '',\r\n            volumeIcon: 'üîä',\r\n            mode: 'listloop',\r\n            modeIcon: <span role=\"img\" aria-label=\"list\" title=\"ÂàóË°®Âæ™ÁéØ\">üîÅ</span>,\r\n            showReadyList: false,\r\n        }\r\n    }\r\n    // ÁªÑ‰ª∂ÁöÑÁîüÂëΩÂë®ÊúüÂáΩÊï∞=>ÁªÑ‰ª∂ÂÆåÊàêÊõ¥Êñ∞ÂêéÁ´ãÂç≥Ë∞ÉÁî®„ÄÇÂàùÂßãÂåñÊó∂‰∏ç‰ºöË¢´Ë∞ÉÁî®\r\n    componentDidUpdate(prevProps){\r\n        if(this.props.playQueue.song.id !== prevProps.playQueue.song.id){\r\n            this.changeSongCallBack()\r\n        }\r\n    }\r\n    toPlay = () =>{\r\n        this.audio.play();\r\n        this.setState({ppIcon:'pause-circle'});\r\n        this.updatePlayingStatus(true);\r\n        // this.audio.addEventListener('durationchange',console.log(1))\r\n    }\r\n    toPause = () =>{\r\n        this.audio.pause();\r\n        this.setState({ppIcon:'play-circle'});\r\n    }\r\n    syncTime = () =>{\r\n        const { song } = this.props.playQueue;\r\n        const duration = song.dt || song.duration;\r\n        const timeScale = (this.audio.currentTime * 1000) / duration;\r\n        this.setState({\r\n            curProgressBarWidth: `${timeScale * 100}%`,\r\n            cdt: formatCurrentTime(this.audio.currentTime)\r\n        })\r\n        this.updateCurrentTime();\r\n    }\r\n    updateCurrentTime = () =>{\r\n        this.props.indexUpdatePlayerStatus({\r\n            currentTime: this.audio.currentTime,\r\n        })\r\n    }\r\n    updatePlayingStatus = (status) =>{\r\n        this.props.indexUpdatePlayerStatus({\r\n            isPlaying:status\r\n        })\r\n    }\r\n    togglePlay = () =>{\r\n        if(this.audio.paused || this.audio.ended){\r\n            this.toPlay();\r\n        }else{\r\n            this.toPause();\r\n        }\r\n    }\r\n    setCurTime = (e) =>{\r\n        const { left } = this.progressBar.getBoundingClientRect();\r\n        const distance = e.clientX - left;\r\n        const scale = distance / this.progressBar.offsetWidth;\r\n        // audio Ê†áÁ≠æÂÜÖÊúâdurationÔºåÊï∞ÊçÆÂØπË±°‰∏≠‰πüÊúâdtÔºå‰∏çËøádt = 1000 * duration\r\n        this.audio.currentTime = this.audio.duration * scale;\r\n        this.setState({\r\n            curProgressBarWidth: `${scale * 100}%`,\r\n        })\r\n        console.log(this.state.curProgressBarWidth);\r\n        this.updateCurrentTime();\r\n    }\r\n    // Â£∞Èü≥\r\n    toggleMute = () =>{\r\n        this.audio.muted = !this.audio.muted;\r\n        if(this.audio.muted){\r\n            this.setState({\r\n                lastVolumeIcon: this.state.volumeIcon,\r\n                volumeIcon: 'üîá'\r\n            })\r\n        }else {\r\n            this.setState({\r\n                volumeIcon: this.state.lastVolumeIcon\r\n            })\r\n        }\r\n    }\r\n    setVol = (e) =>{\r\n        const { left } = this.valBar.getBoundingClientRect();\r\n        const distance = e.clientX - left;\r\n        const scale = distance / this.valBar.offsetWidth;\r\n        this.audio.volume = scale;\r\n        let volumeIcon\r\n        if(scale > 0 && scale < 0.5){\r\n            volumeIcon = 'üîâ';\r\n        }else if(scale >= 0.5 && scale <=1) {\r\n            volumeIcon = 'üîä';\r\n        }\r\n        this.setState({\r\n            volumeIcon,\r\n            curVolBarWidth: `${distance}px`\r\n        })\r\n    }\r\n\r\n    // Êí≠ÊîæÊ®°Âºè\r\n    setMode = () =>{\r\n        const { mode } = this.state;\r\n        // ÂàóË°®Âæ™ÁéØ => È°∫Â∫èÊí≠Êîæ\r\n        const listloop = () =>{\r\n            this.setState({\r\n                mode: 'sequential',\r\n                modeIcon: <span role=\"img\" aria-label=\"list\" title=\"È°∫Â∫èÊí≠Êîæ\">‚Ü©Ô∏è</span>,\r\n            })\r\n        }\r\n        // È°∫ËÆØÊí≠Êîæ => ÂçïÊõ≤Âæ™ÁéØ\r\n        const sequential = () =>{\r\n            this.setState({\r\n                mode: 'singleCycle',\r\n                modeIcon: <span role=\"img\" aria-label=\"list\" title=\"ÂçïÊõ≤Âæ™ÁéØ\">üîÇ</span>\r\n            },() => {\r\n                this.audio.loop = true\r\n            })\r\n        }\r\n        // ÂçïÊõ≤Âæ™ÁéØ => ÈöèÊú∫Êí≠Êîæ\r\n        const singleCycle = () =>{\r\n            this.setState({\r\n                mode: 'shuffleplay',\r\n                modeIcon: <span role=\"img\" aria-label=\"list\" title=\"ÈöèÊú∫Êí≠Êîæ\">üîÄ</span>\r\n            },() => {\r\n                this.audio.loop = false\r\n            })\r\n        }\r\n        // ÈöèÊú∫Êí≠Êîæ => ÂàóË°®Âæ™ÁéØ\r\n        const shuffleplay = () =>{\r\n            this.setState({\r\n                mode: 'listloop',\r\n                modeIcon: <span role=\"img\" aria-label=\"list\" title=\"ÂàóË°®Âæ™ÁéØ\">üîÅ</span>\r\n            })\r\n        }\r\n        const modeMap = {\r\n            listloopTest: listloop,\r\n            sequentialTest:sequential,\r\n            singleCycleTest: singleCycle,\r\n            shuffleplayTest: shuffleplay\r\n        }\r\n        // ÂΩìÁÇπÂáªÂÆåÂÖ®ÈÉ®Ê®°ÂºèÊó∂ÔºåÂ∞±‰ºöÂõûÂà∞ÊúÄÂàùÁöÑÁä∂ÊÄÅ\r\n        if(mode === \"listloop\"){\r\n            modeMap.listloopTest()\r\n        }else if(mode === \"sequential\"){\r\n            modeMap.sequentialTest()\r\n        }else if(mode ===\"singleCycle\"){\r\n            modeMap.singleCycleTest()\r\n        }else if(mode ===\"shuffleplay\"){\r\n            modeMap.shuffleplayTest()\r\n        }\r\n    }\r\n    toggleReadyList = () =>{\r\n        this.setState({\r\n            showReadyList: !this.state.showReadyList\r\n        })\r\n    }\r\n    // ÂàáÊç¢Ê≠åÊõ≤\r\n    // ‰∏ä‰∏ÄÈ¶ñ\r\n    preSong = () =>{\r\n        let { index } = this.props.playQueue;\r\n        const { mode } = this.state;\r\n        const { playlist } = this.props.playQueue;\r\n        // Áî±indexÊéßÂà∂Êí≠ÊîæÁöÑÊ≠åÊõ≤ÁöÑÊòØÊåâÁÖßplaylist‰∏≠ÁöÑÊéíÂ∫èÊù•ÁöÑ\r\n        index -= 1;\r\n        // Ëã•ÊòØÂΩìÂâçÂú®playlist‰∏≠ÊòØÁ¨¨‰∏ÄÈ¶ñÊ≠åÔºåÂàôË∑≥ËΩ¨Âà∞ÊúÄÂêéÁöÑ‰∏ÄÈ¶ñÔºåÂç≥length-1\r\n        if(index === -1){\r\n            index=playlist.length - 1;\r\n        }\r\n        // Ëã•ÂΩìÂâçÊí≠ÊîæÊ®°ÂºèÊòØÈöèÊú∫ÁöÑËØùÔºåÂç≥ÈöèÊú∫Ë∑≥ËΩ¨‰∏ÄÈ¶ñÊ≠åÊõ≤\r\n        if(mode === 'shuffleplay'){\r\n             index = Math.floor(Math.random() * playlist.length)\r\n        }\r\n        const song = playlist[index];\r\n        this.props.indexChangeSong({ song, index })\r\n    }\r\n    // ‰∏ã‰∏ÄÈ¶ñ\r\n    nextSong = () =>{\r\n        let { index } = this.props.playQueue;\r\n        const { mode } = this.state;\r\n        const { playlist } = this.props.playQueue;\r\n        index += 1;\r\n        // Ëã•ÊòØÂΩìÂâçÂú®playlist‰∏≠ÊòØÁ¨¨‰∏ÄÈ¶ñÊ≠åÔºåÂàôË∑≥ËΩ¨Âà∞ÊúÄÂêéÁöÑ‰∏ÄÈ¶ñÔºåÂç≥length-1\r\n        if(index === playlist.length){\r\n            index=0;\r\n        }\r\n        // Ëã•ÂΩìÂâçÊí≠ÊîæÊ®°ÂºèÊòØÈöèÊú∫ÁöÑËØùÔºåÂç≥ÈöèÊú∫Ë∑≥ËΩ¨‰∏ÄÈ¶ñÊ≠åÊõ≤\r\n        if(mode === 'shuffleplay'){\r\n             index = Math.floor(Math.random() * playlist.length)\r\n        }\r\n        const song = playlist[index];\r\n        this.props.indexChangeSong({ song, index })\r\n    }\r\n    // Êí≠ÊîæÈîÆ‰ºòÂåñ\r\n    changeSongCallBack = () =>{\r\n        const { ppIcon } = this.state;\r\n        // ÊöÇÂÅúÁä∂ÊÄÅ‰∏ãÂàáÊ≠å‰øùÊåÅÊöÇÂÅúÁä∂ÊÄÅ\r\n        // \r\n    }\r\n    render(){\r\n        const { volumeIcon,\r\n                modeIcon,\r\n                ppIcon,\r\n                curProgressBarWidth,\r\n                curVolBarWidth,\r\n                showReadyList\r\n             } = this.state;\r\n        const { song } = this.props.playQueue;\r\n        const duration = song.duration || song.dt;\r\n        const artists = song.artists || song.ar\r\n        const album = song.album || song.al\r\n        return(\r\n            <footer key=\"player\">\r\n                <audio\r\n                    key=\"audio\"\r\n                    src={song.url}\r\n                    ref={(node) =>{\r\n                        this.audio=node\r\n                    }}\r\n                    onTimeUpdate={this.syncTime}\r\n                    >\r\n                    ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅaudioÊ†áÁ≠æÔºåÊó†Ê≥ïÊí≠ÊîæÈü≥‰πê\r\n                </audio>\r\n                <div className=\"player-album\">\r\n                    <Link to={{ pathname:`/lyric/${song.id}`}}>\r\n                        <img src={album.picUrl} alt=\"album-img\"/>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"player-btns\">\r\n                    <Icon type=\"backward\" onClick={this.preSong}/>\r\n                    <Icon type={ppIcon} onClick={this.togglePlay} />\r\n                    <Icon type=\"forward\"  onClick={this.nextSong}/>\r\n                </div>\r\n                <div className=\"player-state\">\r\n                    <div className=\"player-state-top\">\r\n                        <span className=\"name\">{song.name}</span>\r\n                        <div className=\"artist\">\r\n                            {artists.map(v=>(\r\n                                <Link key={v.id} to={{ pathname: `/artistinfo/${v.id}` }}>\r\n                                    {v.name}\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"duration\">\r\n                            {this.state.cdt}/{formatDuration(duration)}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"player-state-bottom\">\r\n                        <div\r\n                            className=\"progress-bar\"\r\n                            ref={(node) =>{\r\n                                this.progressBar = node;\r\n                            }}\r\n                            onClick={(e) =>{\r\n                                this.setCurTime(e);\r\n                            }}\r\n                        >\r\n                            <div\r\n                                className=\"current-progress\" style={{width:`${curProgressBarWidth}`}}\r\n\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"vol-wrapper\">\r\n                    <div className=\"vol\">\r\n                        <span\r\n                            onClick={this.toggleMute}\r\n                        >\r\n                            {volumeIcon}\r\n                        </span>\r\n                        <div\r\n                            className=\"vol-bar\"\r\n                            onClick={this.setVol}\r\n                            ref={(node) =>{\r\n                                this.valBar=node\r\n                            }}\r\n                        >\r\n                            <div\r\n                                className=\"current-vol\"\r\n                                style={{width:`${curVolBarWidth}`}}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"player-extra\">\r\n                    <div\r\n                        className=\"mode-title\"\r\n                        onClick={this.setMode}\r\n                        ref={(node) =>{\r\n                            this.changePlayer = node;\r\n                        }}\r\n                    >\r\n                        {modeIcon}\r\n                    </div>\r\n                    <Icon type=\"heart-o\"/>\r\n                    <Icon type=\"bars\" onClick={this.toggleReadyList}/>\r\n                    {showReadyList ? <ReadyList /> : null}\r\n                </div>\r\n            </footer>\r\n        )\r\n    }\r\n}\r\nconst mapState = (state) =>{\r\n    return{\r\n        playQueue: state.playQueue\r\n    }\r\n};\r\nconst mapDispatch = (dispatch) =>({\r\n    indexChangeSong({ song, index}){\r\n        dispatch(actionCreators.changeSong({ song, index}));\r\n    },\r\n    indexUpdatePlayerStatus(status){\r\n        dispatch(actionCreators.updatePlayerStatus(status));\r\n    }\r\n});\r\nexport default connect(mapState,mapDispatch)(Footer);\r\n"]},"metadata":{},"sourceType":"module"}