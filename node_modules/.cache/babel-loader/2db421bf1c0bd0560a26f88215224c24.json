{"ast":null,"code":"import _toConsumableArray from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"H:\\\\music\\\\react-music-player\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport * as actionTypes from './actionTypes';\nvar song = {\n  name: 'だんご大家族',\n  id: 760533,\n  pst: 0,\n  t: 0,\n  artists: [{\n    id: 17601,\n    name: '茶太',\n    tns: [],\n    alias: []\n  }],\n  alia: [],\n  pop: 100,\n  st: 0,\n  rt: '',\n  fee: 0,\n  v: 51,\n  crbt: null,\n  cf: '',\n  album: {\n    id: 760533,\n    name: 'メグメル/だんご大家族',\n    picUrl: 'https://p1.music.126.net/jNhg3v8ayCzL_k470qQyvQ==/3424978721550752.jpg',\n    tns: [],\n    pic_str: '18225504742452490',\n    pic: 3424978721550752\n  },\n  dt: 273000,\n  h: null,\n  m: {\n    br: 192000,\n    fid: 0,\n    size: 6553434,\n    vd: -2\n  },\n  l: {\n    br: 90000,\n    fid: 0,\n    size: 6553434,\n    vd: -2\n  },\n  a: null,\n  cd: '1',\n  no: 18,\n  rtUrl: null,\n  ftype: 0,\n  rtUrls: [],\n  djId: 0,\n  copyright: 2,\n  s_id: 0,\n  mst: 9,\n  cp: 0,\n  mv: 0,\n  rtype: 0,\n  rurl: null,\n  publishTime: 1193328000000,\n  url: 'http://m10.music.126.net/20181222143245/e725ffc6f708bb8afc04723bff63fec6/ymusic/4501/61c6/dedf/3da99dc286eeefbdc5a3fbd9906e5fc3.mp3'\n};\nvar initState = {\n  playlist: [song],\n  song: song,\n  index: 0,\n  flag: '',\n  currentTime: 0,\n  isPlaying: false,\n  starredList: []\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var delIndex;\n  var stateTemp = JSON.parse(JSON.stringify(state));\n  var playlist = stateTemp.playlist;\n  var len = playlist.length;\n\n  switch (action.type) {\n    case actionTypes.INIT_STARRED_LIST:\n      return _objectSpread({}, state, {\n        starredList: _toConsumableArray(action.payload)\n      });\n\n    case actionTypes.PLAYER_UPDATE_STATUS:\n      return _objectSpread({}, state, action.payload);\n\n    case actionTypes.PLAYER_DELETE_SONG:\n      for (var i = 0; i < len; i++) {\n        if (playlist[i].id === action.payload) {\n          delIndex = i;\n        }\n      }\n\n      playlist.splice(delIndex, 1);\n      return _objectSpread({}, state, {\n        playlist: playlist,\n        // 删除歌曲后记得改变当前播放歌曲的index\n        index: state.index ? state.index - 1 : state.playlist.length - 1\n      });\n\n    case actionTypes.PLAYER_PLAY_SONG:\n      return _objectSpread({}, state, {\n        playlist: [action.payload].concat(_toConsumableArray(state.playlist)),\n        song: action.payload,\n        index: 0,\n        flag: actionTypes.PLAYER_PLAY_SONG\n      });\n\n    case actionTypes.PLAYER_ADD_SONG:\n      return _objectSpread({}, state, {\n        playlist: [action.payload].concat(_toConsumableArray(state.playlist)),\n        flag: actionTypes.PLAYER_PLAY_SONG\n      });\n\n    case actionTypes.PLAYER_CHANGE_SONG:\n      return _objectSpread({}, state, {\n        song: action.payload.song,\n        index: action.payload.index,\n        flag: action.payload.flag\n      });\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["H:\\music\\react-music-player\\src\\common\\store\\reducer.js"],"names":["actionTypes","song","name","id","pst","t","artists","tns","alias","alia","pop","st","rt","fee","v","crbt","cf","album","picUrl","pic_str","pic","dt","h","m","br","fid","size","vd","l","a","cd","no","rtUrl","ftype","rtUrls","djId","copyright","s_id","mst","cp","mv","rtype","rurl","publishTime","url","initState","playlist","index","flag","currentTime","isPlaying","starredList","state","action","delIndex","stateTemp","JSON","parse","stringify","len","length","type","INIT_STARRED_LIST","payload","PLAYER_UPDATE_STATUS","PLAYER_DELETE_SONG","i","splice","PLAYER_PLAY_SONG","PLAYER_ADD_SONG","PLAYER_CHANGE_SONG"],"mappings":"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","sourcesContent":["import * as actionTypes from './actionTypes';\r\n\r\nconst song = {\r\n  name: 'だんご大家族',\r\n  id: 760533,\r\n  pst: 0,\r\n  t: 0,\r\n  artists: [\r\n    {\r\n      id: 17601,\r\n      name: '茶太',\r\n      tns: [],\r\n      alias: [],\r\n    },\r\n  ],\r\n  alia: [],\r\n  pop: 100,\r\n  st: 0,\r\n  rt: '',\r\n  fee: 0,\r\n  v: 51,\r\n  crbt: null,\r\n  cf: '',\r\n  album: {\r\n    id: 760533,\r\n    name: 'メグメル/だんご大家族',\r\n    picUrl: 'https://p1.music.126.net/jNhg3v8ayCzL_k470qQyvQ==/3424978721550752.jpg',\r\n    tns: [],\r\n    pic_str: '18225504742452490',\r\n    pic: 3424978721550752,\r\n  },\r\n  dt: 273000,\r\n  h: null,\r\n  m: {\r\n    br: 192000,\r\n    fid: 0,\r\n    size: 6553434,\r\n    vd: -2,\r\n  },\r\n  l: {\r\n    br: 90000,\r\n    fid: 0,\r\n    size: 6553434,\r\n    vd: -2,\r\n  },\r\n  a: null,\r\n  cd: '1',\r\n  no: 18,\r\n  rtUrl: null,\r\n  ftype: 0,\r\n  rtUrls: [],\r\n  djId: 0,\r\n  copyright: 2,\r\n  s_id: 0,\r\n  mst: 9,\r\n  cp: 0,\r\n  mv: 0,\r\n  rtype: 0,\r\n  rurl: null,\r\n  publishTime: 1193328000000,\r\n  url: 'http://m10.music.126.net/20181222143245/e725ffc6f708bb8afc04723bff63fec6/ymusic/4501/61c6/dedf/3da99dc286eeefbdc5a3fbd9906e5fc3.mp3',\r\n}\r\n\r\nconst initState = {\r\n  playlist: [song],\r\n  song,\r\n  index: 0,\r\n  flag: '',\r\n  currentTime: 0,\r\n  isPlaying: false,\r\n  starredList: [],\r\n}\r\n\r\nexport default (state = initState, action) =>{\r\n    let delIndex;\r\n    const stateTemp = JSON.parse(JSON.stringify(state));\r\n    const { playlist } = stateTemp;\r\n    const len = playlist.length;\r\n    switch (action.type) {\r\n        case actionTypes.INIT_STARRED_LIST:\r\n            return { ...state, starredList: [...action.payload] }\r\n        case actionTypes.PLAYER_UPDATE_STATUS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case actionTypes.PLAYER_DELETE_SONG:\r\n            for (var i = 0; i < len ;i++) {\r\n                if(playlist[i].id === action.payload){\r\n                    delIndex = i;\r\n                }\r\n            }\r\n            playlist.splice(delIndex, 1)\r\n            return {\r\n                ...state,\r\n                playlist,\r\n                // 删除歌曲后记得改变当前播放歌曲的index\r\n                index: state.index ? state.index - 1 : state.playlist.length - 1\r\n            }\r\n        case actionTypes.PLAYER_PLAY_SONG:\r\n            return {\r\n                ...state,\r\n                playlist: [action.payload, ...state.playlist],\r\n                song: action.payload,\r\n                index: 0,\r\n                flag: actionTypes.PLAYER_PLAY_SONG\r\n            }\r\n        case actionTypes.PLAYER_ADD_SONG:\r\n            return {\r\n                ...state,\r\n                playlist: [action.payload, ...state.playlist],\r\n                flag: actionTypes.PLAYER_PLAY_SONG\r\n            }\r\n        case actionTypes.PLAYER_CHANGE_SONG:\r\n            return {\r\n                ...state,\r\n                song: action.payload.song,\r\n                index: action.payload.index,\r\n                flag: action.payload.flag\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}